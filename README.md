# ğŸš— ìë™ì°¨ ë¶ˆëŸ‰ ë¶„ë¥˜ ë³´ì¡° ì‹œìŠ¤í…œ (VisionQC)

ìë™ì°¨ ì™¸ì¥ ë¶ˆëŸ‰ ì´ë¯¸ì§€ë¥¼ **PyQt5 GUI**ë¡œ ì—…ë¡œë“œ â†’ **GPT ê¸°ë°˜ ë¶„ë¥˜/ì„¤ëª…** â†’ **SQLite DB ì €ì¥Â·ê²€ìƒ‰**ê¹Œì§€ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” **í’ˆì§ˆ ê´€ë¦¬ ë³´ì¡° ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤.  
GPT ëª¨ë¸ ê¸°ë°˜ì˜ ë¹„ì „ ë¶„ì„ ë³´ì¡° íˆ´ë¡œ, **ë¶ˆëŸ‰ ë¶„ë¥˜Â·ì„¤ëª… ìë™í™” + ê¸°ë¡Â·ê²€ìƒ‰ í¸ì˜ì„± ê°•í™”**ì— ì´ˆì ì„ ë§ì¶˜ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ“Œ ì£¼ì œ ë° ì„ ì •ë°°ê²½
ìë™ì°¨ ì‚°ì—…ì—ì„œëŠ” í’ˆì§ˆ ê´€ë¦¬(QA/QC)ë¥¼ ìœ„í•´ ë¶ˆëŸ‰ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ ë¹ ë¥´ê²Œ ë¶„ë¥˜í•˜ê³  ê¸°ë¡í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  
ê¸°ì¡´ AOI ì¥ë¹„ëŠ” ë¹„ìš©ì´ ë†’ê³ , ëª¨ë“  ë¶ˆëŸ‰ì„ ì™„ë²½íˆ êµ¬ë¶„í•˜ì§€ ëª»í•˜ëŠ” í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤.  

ì´ì— ë¶ˆëŸ‰ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë¶„ë¥˜Â·ì„¤ëª…í•˜ê³ , ê²°ê³¼ë¥¼ DBì— ì €ì¥Â·ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ”  
**ìë™ì°¨ í’ˆì§ˆ ê´€ë¦¬ ë³´ì¡° ì‹œìŠ¤í…œ(VisionQC)**ì„ êµ¬í˜„í•˜ê³ ì í•©ë‹ˆë‹¤.

---

## ğŸ¯ ëª©í‘œ
- ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•œ ìë™ì°¨ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ GPTë¥¼ í†µí•´ ìë™ ë¶„ì„  
- **ìŠ¤í¬ë˜ì¹˜, ê· ì—´, ì˜¤ì—¼, ë‚©ë•œ ë¶ˆëŸ‰, ë³€í˜•, ì •ë ¬ë¶ˆëŸ‰, ë¶€í’ˆ ëˆ„ë½ ë“±** ìœ í˜• ë¶„ë¥˜ ë° ì„¤ëª… ì œê³µ  
- ê²°ê³¼ë¥¼ SQLite DBì— ì €ì¥í•˜ê³  **PyQt5 GUI**ë¥¼ í†µí•´ ê²€ìƒ‰Â·ì¡°íšŒ  

---

## ğŸ§© ì£¼ìš” ê¸°ëŠ¥

| êµ¬ë¶„ | ì„¤ëª… |
|------|------|
| ğŸ–¼ï¸ **ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ë¶„ë¥˜(Classify)** | ë‹¨ì¼/ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ í›„ GPT ê¸°ë°˜ ë¶„ë¥˜ ìˆ˜í–‰ |
| ğŸ’¾ **DB ì €ì¥ (SQLite3)** | ê²°ê³¼ë¥¼ ìë™ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸° |
| ğŸ” **ê²€ìƒ‰ ë° ì‚­ì œ** | íˆ´ë°”ë¥¼ í†µí•œ DB ê²€ìƒ‰ / ì„ íƒ í–‰ ì‚­ì œ |
| ğŸ“Š **í†µê³„ ëŒ€ì‹œë³´ë“œ** | ë¶ˆëŸ‰ ë°ì´í„°ì˜ í†µê³„ ë¶„ì„ ë° ì‹œê°í™” (4ê°œ íƒ­) |
| ğŸ’¾ **Save PNG / Export CSV** | ê·¸ë˜í”„ ë˜ëŠ” ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ |
| ğŸ“‚ **Export DB (CSV)** | ì „ì²´ DBë¥¼ CSV íŒŒì¼ë¡œ ì €ì¥ |

---

## ğŸ›  ì§„í–‰ ìƒí™© (2025-10-05 ê¸°ì¤€)
- [x] **ë‹¨ì¼/í´ë” ì—…ë¡œë“œ** â†’ GPT ë¶„ë¥˜ ë° ì„¤ëª… ì¶œë ¥ â†’ DB ì €ì¥  
- [x] **DB ìŠ¤í‚¤ë§ˆ ì •ë¦¬**: `results` ë‹¨ì¼ í…Œì´ë¸”
- [x] **ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€**: ë¼ë²¨, í‚¤ì›Œë“œ, ë‚ ì§œ ë²”ìœ„ í•„í„°ë§
- [x] **ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€**: ì„ íƒëœ í–‰ ì‚­ì œ í›„ í…Œì´ë¸” ê°±ì‹ 
- [x] **ì¤‘ë³µ ì €ì¥ ë°©ì§€**: UNIQUE ì¸ë±ìŠ¤ + `INSERT OR IGNORE` / UPSERT ì ìš©
- [x] **CarDD ìƒ˜í”Œë§ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€** (ì‹¤í–‰ ì‹œ ëŒ€ìƒ í´ë” ë¹„ìš°ê¸° ì˜µì…˜ ì§€ì›)
- [x] **í†µê³„ ëŒ€ì‹œë³´ë“œ 4íƒ­ êµ¬ì„±** (`Defect Distribution`, `Daily Trend`, `Additional Metrics`, `Location & Action`)   
- [x] **í†µê³„ ëŒ€ì‹œë³´ë“œ Image/CSV Export ê¸°ëŠ¥**
- [x] **íˆ´ë°” Export DB (CSV)** â€” `app.db` ì „ì²´ë¥¼ CSV íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°  

---

## ğŸ§© ì‚¬ìš© ê¸°ìˆ 
- **Python**
- **PyQt5** â€” GUI êµ¬ì„±  
- **OpenAI API (gpt-4o-mini)** â€” ë¶ˆëŸ‰ ìœ í˜• ë° ì„¤ëª… ìë™ ìƒì„±  
- **SQLite3** â€” ê²½ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤  
- **dotenv (.env)** â€” í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬  
- **Matplotlib** â€” í†µê³„ ëŒ€ì‹œë³´ë“œ ë° ì‹œê°í™”
- **Pandas**
- **Numpy**

---

## âš™ï¸ .env ì„¤ì •
ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ ìƒì„±:  

```env
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
DB_PATH=app.db
ğŸ‘‰ DB_PATHëŠ” ìƒëµ ì‹œ app.db ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ğŸ‘‰ API KeyëŠ” OpenAI ê³„ì •ì—ì„œ ë°œê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
```

---

## ğŸ“‚ ë°ì´í„°ì…‹ ì¶œì²˜

ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” **CarDD (Car Damage Dataset)** ë¥¼ í™œìš©í•˜ì—¬ GPT-4o mini ê¸°ë°˜ ë¶„ë¥˜ ì‹¤í—˜ì„ ì§„í–‰í•©ë‹ˆë‹¤.

CarDDëŠ” ì°¨ëŸ‰ ì™¸ì¥ ì†ìƒ ì´ë¯¸ì§€ ì•½ 4,000ì¥ì„ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ìŠ¤í¬ë˜ì¹˜, ì°Œê·¸ëŸ¬ì§, ê· ì—´, ë³€ìƒ‰, ì˜¤ì—¼ ë“± ë‹¤ì–‘í•œ ë¶ˆëŸ‰ ìœ í˜•ì„ í¬í•¨í•©ë‹ˆë‹¤.

- [CarDD ê³µì‹ í˜ì´ì§€](https://cardd-ustc.github.io/?utm_source=chatgpt.com)

---

## ğŸ” ì „ì²´ íë¦„

1. ì´ë¯¸ì§€ ì—…ë¡œë“œ
2. í”„ë¡¬í”„íŠ¸(ë¶„ë¥˜ ìš”ì²­) ì „ë‹¬
3. GPT-APIë¥¼ í†µí•œ ë¶ˆëŸ‰ ìœ í˜• ë¶„ë¥˜/ì„¤ëª…
4. ê²°ê³¼ ì¶œë ¥ ë° SQLite DB ì €ì¥
5. ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ë¶ˆëŸ‰ ìœ í˜•/ë‚ ì§œë³„ íƒìƒ‰
6. ë°ì´í„° ì‹œê°í™”

---

## ğŸ“· ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤

- ê³µì • ì¤‘ **ìë™ì°¨ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ ì´¬ì˜**
- **GPTê°€ ìë™ìœ¼ë¡œ ë¶ˆëŸ‰ ìœ í˜•ì„ íƒœê¹…**
  - ì˜ˆ: `"scratch", confidence = 0.82`
- **DB(app.db)** ì— ë‚ ì§œ, ë¶ˆëŸ‰ ìœ í˜•, ì‹¬ê°ë„(Severity) ì €ì¥
- **ê²€ìƒ‰ ê¸°ëŠ¥**ì„ í†µí•´ â€œìŠ¤í¬ë˜ì¹˜â€, â€œ9ì›” ê· ì—´â€ ë“±ì˜ í‚¤ì›Œë“œë¡œ ë¹ ë¥¸ ì¡°íšŒ
- **ëŒ€ì‹œë³´ë“œì—ì„œ í†µê³„ ì‹œê°í™”**
  - ë¶ˆëŸ‰ ìœ í˜•ë³„ ë°œìƒ ë¹ˆë„ / ì¼ìë³„ ì¶”ì´ / ì¡°ì¹˜(Action) ë¹„ìœ¨ í™•ì¸ ê°€ëŠ¥

---

## ğŸ“¸ ì‹¤í–‰ í™”ë©´ (Execution Screenshots)

### ğŸ–¥ï¸ ë©”ì¸ í™”ë©´
ì´ë¯¸ì§€ ì—…ë¡œë“œ â†’ GPT ë¶„ë¥˜ â†’ DB ì €ì¥ â†’ ê²°ê³¼ í‘œì‹œ
![Main UI](./assets/main_ui.png)

### âœ… ë¶„ë¥˜ ê²°ê³¼ ì˜ˆì‹œ
ìë™ì°¨ ì´ë¯¸ì§€ì—ì„œ ê²°í•¨ì„ ë¶„ì„í•˜ê³  ê²°ê³¼ë¥¼ DBì— ì €ì¥í•©ë‹ˆë‹¤.
![Classification Result](./assets/classify_result.png)

---

### ğŸ“Š í†µê³„ ëŒ€ì‹œë³´ë“œ (Stats Dashboard)

#### 1ï¸âƒ£ Defect Distribution
ì‹¬ê°ë„(Severity)ë³„ ê²°í•¨ ë°œìƒ ë¹ˆë„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìŠ¤íƒí˜• ë°” ì°¨íŠ¸  
![Defect Distribution](./assets/stats_dashboard.png)

#### 2ï¸âƒ£ Daily Trend
ì¼ìë³„ ë¶ˆëŸ‰ ë°œìƒ ì¶”ì´ë¥¼ ë³´ì—¬ì£¼ëŠ” ë¼ì¸ ì°¨íŠ¸  
![Daily Trend](./assets/Daily%20Trend.png)

#### 3ï¸âƒ£ Additional Metrics
- Defect Type Ratio (Top10)  
- Severity Ratio (A/B/C)
![Additional Metrics](./assets/Additional%20Metrics.png)

#### 4ï¸âƒ£ Location & Action
ìœ„ì¹˜ë³„ ê²°í•¨ ë¶„í¬ ë° ì¡°ì¹˜(Action) ë¹„ìœ¨ ì‹œê°í™”  
![Location Action](./assets/Location_Action.png)

#### 5ï¸âƒ£ ì „ì²´ ë¶ˆëŸ‰ ë¶„í¬ ì˜ˆì‹œ
![Defect Distribution Example](./assets/Defect%20Distribution.png)

---

### ğŸ’¾ Export ê¸°ëŠ¥
ê·¸ë˜í”„ ì €ì¥ ë° CSV ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **Save PNG** | ëŒ€ì‹œë³´ë“œ ì´ë¯¸ì§€ë¥¼ íŒŒì¼ë¡œ ì €ì¥ | ![Export Image](./assets/export_img_success.png) |
| **Export CSV** | ê·¸ë˜í”„ë³„ ë°ì´í„°ë¥¼ CSV íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸° | ![Export CSV](./assets/export_csv_success.png) |

---

### ğŸ—‚ï¸ Database ë·° (ê²°ê³¼ í…Œì´ë¸”)
ë¶ˆëŸ‰ ë¶„ë¥˜ ê²°ê³¼ê°€ SQLite DB(`app.db`)ì— ì €ì¥ë˜ë©° í…Œì´ë¸”ë¡œ í‘œì‹œë©ë‹ˆë‹¤.  
![DB Table](./assets/db_results_table.png)

---

## ğŸ”§ ì‹œìŠ¤í…œ êµ¬ì„±ë„
```css
[ ì‚¬ìš©ì ]
   â†“
[ PyQt5 GUI ]
   â†“                â†˜
[ ì´ë¯¸ì§€ ì—…ë¡œë“œ + í”„ë¡¬í”„íŠ¸ ]   [ ê²€ìƒ‰ ì§ˆì˜ ]
   â†“                          â†˜
[ GPT-4o mini API í˜¸ì¶œ ]      [ SQLite DB ]
   â†“                          â†—
[ ë¶ˆëŸ‰ ìœ í˜• ë¶„ë¥˜ + ì„¤ëª… ì¶œë ¥ ]
   â†“
[ ê²°ê³¼ DB ì €ì¥ ë° í™”ë©´ í‘œì‹œ ]
   â†“
[ ë°ì´í„° ì‹œê°í™” ]
```
---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```css
defect_inspector/
â”œâ”€â”€ gui/
â”‚   â””â”€â”€ main_app.py
â”‚   â””â”€â”€ main_window.py
â”‚   â””â”€â”€ stats_view.py
â”œâ”€â”€ api/
â”‚   â””â”€â”€ openai_api.py
â”œâ”€ assets/
â”œâ”€â”€ db/
â”‚   â””â”€â”€ db.py
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ make_test_db.py
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ config.py
â”‚   â””â”€â”€ cardd_sampler.py 
â”‚   â””â”€â”€ file_handler.py
â”œâ”€â”€ main.py
â”œâ”€â”€ app.db
â”œâ”€â”€ .env.example
â””â”€â”€ requirements.txt
```

---

## ğŸš€ í™•ì¥ ì•„ì´ë””ì–´

- ì´ë¯¸ì§€ ì „ì²˜ë¦¬(OpenCV) ê¸°ë°˜ ë³´ì¡° íŠ¹ì§• ì¶”ì¶œ (ì˜ˆ: ì—ì§€ ê²€ì¶œ í›„ GPT ë³´ì¡° íŒì •)

---

## ğŸ“¦ requirements.txt
```txt
# GUI
PyQt5>=5.15.9

# Data / DB
pandas>=2.0.0
sqlite-utils>=3.36.0

# Visualization
matplotlib>=3.8.0

# API & Config
openai>=1.0.0
python-dotenv>=1.0.0

# Utilities
pathlib
```

---

## ğŸ‘¨â€ğŸ’» ê°œë°œì
**ì´ê´‘í˜¸ (Kwangho Lee)**  
ì„±ê· ê´€ëŒ€í•™êµ ê¸°ê³„ê³µí•™ë¶€  

- GitHub: [@mavro7910](https://github.com/mavro7910)  
- Email: [kwangho97@g.skku.edu]

---

## ğŸ“œ License
ì´ í”„ë¡œì íŠ¸ëŠ” [MIT License](./LICENSE)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

---
