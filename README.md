# ðŸš— ìžë™ì°¨ ë¶ˆëŸ‰ ë¶„ë¥˜ ë³´ì¡° ì‹œìŠ¤í…œ (VisionQC)

ìžë™ì°¨ ì™¸ìž¥ ë¶ˆëŸ‰ ì´ë¯¸ì§€ë¥¼ **PyQt5 GUI**ë¡œ ì—…ë¡œë“œ â†’ **GPT ê¸°ë°˜ ë¶„ë¥˜/ì„¤ëª…** â†’ **SQLite DB ì €ìž¥Â·ê²€ìƒ‰**ê¹Œì§€ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” **í’ˆì§ˆ ê´€ë¦¬ ë³´ì¡° ì‹œìŠ¤í…œ**ìž…ë‹ˆë‹¤.  
ê³ ê°€ì˜ AOIë¥¼ ì™„ì „ížˆ ëŒ€ì²´í•˜ê¸°ë³´ë‹¤ëŠ”, **ë¶ˆëŸ‰ ë¶„ë¥˜Â·ì„¤ëª… ìžë™í™” + ê¸°ë¡Â·ê²€ìƒ‰ íŽ¸ì˜ì„± ê°•í™”**ì— ì´ˆì ì„ ë§žì¶˜ í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

---

## ðŸ“Œ ì£¼ì œ ë° ì„ ì •ë°°ê²½
ìžë™ì°¨ ì‚°ì—…ì—ì„œëŠ” í’ˆì§ˆ ê´€ë¦¬(QA/QC)ë¥¼ ìœ„í•´ ë¶ˆëŸ‰ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ ë¹ ë¥´ê²Œ ë¶„ë¥˜í•˜ê³  ê¸°ë¡í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  
ê¸°ì¡´ AOI ìž¥ë¹„ëŠ” ë¹„ìš©ì´ ë†’ê³ , ëª¨ë“  ë¶ˆëŸ‰ì„ ì™„ë²½ížˆ êµ¬ë¶„í•˜ì§€ ëª»í•˜ëŠ” í•œê³„ê°€ ìžˆìŠµë‹ˆë‹¤.  

ì´ì— ë¶ˆëŸ‰ ì´ë¯¸ì§€ë¥¼ ìžë™ìœ¼ë¡œ ë¶„ë¥˜Â·ì„¤ëª…í•˜ê³ , ê²°ê³¼ë¥¼ DBì— ì €ìž¥Â·ê²€ìƒ‰í•  ìˆ˜ ìžˆëŠ”  
**ìžë™ì°¨ í’ˆì§ˆ ê´€ë¦¬ ë³´ì¡° ì‹œìŠ¤í…œ(VisionQC)**ì„ êµ¬í˜„í•˜ê³ ìž í•©ë‹ˆë‹¤.

---

## ðŸŽ¯ ëª©í‘œ
- ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•œ ìžë™ì°¨ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ GPTë¥¼ í†µí•´ ìžë™ ë¶„ì„  
- **ìŠ¤í¬ëž˜ì¹˜, ê· ì—´, ì˜¤ì—¼, ë‚©ë•œ ë¶ˆëŸ‰, ë³€í˜•, ì •ë ¬ë¶ˆëŸ‰, ë¶€í’ˆ ëˆ„ë½, ë²„ ë“±** ìœ í˜• ë¶„ë¥˜ ë° ì„¤ëª… ì œê³µ  
- ê²°ê³¼ë¥¼ SQLite DBì— ì €ìž¥í•˜ê³  **PyQt5 GUI**ë¥¼ í†µí•´ ê²€ìƒ‰Â·ì¡°íšŒ  

---

## ðŸ›  ì§„í–‰ ìƒí™© (2025-10-04 ê¸°ì¤€)
- [x] **ë‹¨ì¼/í´ë” ì—…ë¡œë“œ** â†’ GPT ë¶„ë¥˜ ë° ì„¤ëª… ì¶œë ¥ â†’ DB ì €ìž¥  
- [x] **DB ìŠ¤í‚¤ë§ˆ ì •ë¦¬**: `notes` ë‹¨ì¼ í…Œì´ë¸”, `image_path`/`image_hash` **UNIQUE ì¸ë±ìŠ¤** ì ìš©  
- [x] **ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€**: ë¼ë²¨, í‚¤ì›Œë“œ, ë‚ ì§œ ë²”ìœ„ í•„í„°ë§  
- [x] **ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€**: ì„ íƒëœ í–‰ ì‚­ì œ í›„ í…Œì´ë¸” ê°±ì‹   
- [x] **ì¤‘ë³µ ì €ìž¥ ë°©ì§€**: UNIQUE ì¸ë±ìŠ¤ + `INSERT OR IGNORE` / UPSERT ì ìš©  
- [x] **QLayout ì¤‘ë³µ setLayout ê²½ê³  í•´ê²°**  
- [x] **Matplotlib tight_layout ê²½ê³  í•´ê²°**  
- [x] **ì´ë¯¸ì§€ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°(UI)** â€” ì—…ë¡œë“œ ì‹œ ì¶•ì†Œ ì´ë¯¸ì§€ í‘œì‹œ ë° í´ë¦­ í™•ëŒ€ ê¸°ëŠ¥ êµ¬í˜„  
- [x] **ë¶ˆëŸ‰/Confidence ë¶„í¬ ì‹œê°í™”(ëŒ€ì‹œë³´ë“œ)** â€” Matplotlib ê¸°ë°˜ í†µê³„ íƒ­ ì™„ì„± (ì‹¬ê°ë„ ìƒ‰ìƒ ë§¤í•‘: `A=red`, `B=orange`, `C=green`)  
- [x] **CarDD ìƒ˜í”Œë§ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€** (ì‹¤í–‰ ì‹œ ëŒ€ìƒ í´ë” ë¹„ìš°ê¸° ì˜µì…˜ ì§€ì›)  
- [ ] CSV/Excel Export ê¸°ëŠ¥ (ì¶”ê°€ ì˜ˆì •)

---

## ðŸ§© ì‚¬ìš© ê¸°ìˆ 
- **Python**
- **PyQt5** â€” GUI êµ¬ì„±  
- **OpenAI API (gpt-4o-mini)** â€” ë¶ˆëŸ‰ ìœ í˜• ë° ì„¤ëª… ìžë™ ìƒì„±  
- **SQLite3** â€” ê²½ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤  
- **dotenv (.env)** â€” í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬  
- **Matplotlib** â€” í†µê³„ ëŒ€ì‹œë³´ë“œ ë° ì‹œê°í™”  

---

## âš™ï¸ .env ì„¤ì •
ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ ìƒì„±:  

```env
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
DB_PATH=app.db
ðŸ‘‰ DB_PATHëŠ” ìƒëžµ ì‹œ app.db ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ðŸ‘‰ API KeyëŠ” OpenAI ê³„ì •ì—ì„œ ë°œê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
```

---

## ðŸ“‚ ë°ì´í„°ì…‹ ì¶œì²˜

ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” **CarDD (Car Damage Dataset)** ë¥¼ í™œìš©í•˜ì—¬ GPT-4o mini ê¸°ë°˜ ë¶„ë¥˜ ì‹¤í—˜ì„ ì§„í–‰í•©ë‹ˆë‹¤.

CarDDëŠ” ì°¨ëŸ‰ ì™¸ìž¥ ì†ìƒ ì´ë¯¸ì§€ ì•½ 4,000ìž¥ì„ í¬í•¨í•˜ê³  ìžˆìœ¼ë©°, ìŠ¤í¬ëž˜ì¹˜, ì°Œê·¸ëŸ¬ì§, ê· ì—´, ë³€ìƒ‰, ì˜¤ì—¼ ë“± ë‹¤ì–‘í•œ ë¶ˆëŸ‰ ìœ í˜•ì„ í¬í•¨í•©ë‹ˆë‹¤.

- [CarDD ê³µì‹ íŽ˜ì´ì§€](https://cardd-ustc.github.io/?utm_source=chatgpt.com)

---

## ðŸ” ì „ì²´ íë¦„

1. ì´ë¯¸ì§€ ì—…ë¡œë“œ
2. í”„ë¡¬í”„íŠ¸(ë¶„ë¥˜ ìš”ì²­) ì „ë‹¬
3. GPT-4o-minië¥¼ í†µí•œ ë¶ˆëŸ‰ ìœ í˜• ë¶„ë¥˜/ì„¤ëª…
4. ê²°ê³¼ ì¶œë ¥ ë° SQLite DB ì €ìž¥
5. ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ë¶ˆëŸ‰ ìœ í˜•/ë‚ ì§œë³„ íƒìƒ‰

---

## ðŸ–¼ ì‹¤í–‰ í™”ë©´
![Main UI](images/example.png)

---

## ðŸ”§ ì‹œìŠ¤í…œ êµ¬ì„±ë„
```css
[ ì‚¬ìš©ìž ]
   â†“
[ PyQt5 GUI ]
   â†“                â†˜
[ ì´ë¯¸ì§€ ì—…ë¡œë“œ + í”„ë¡¬í”„íŠ¸ ]   [ ê²€ìƒ‰ ì§ˆì˜ ]
   â†“                          â†˜
[ GPT-4o mini API í˜¸ì¶œ ]      [ SQLite DB ]
   â†“                          â†—
[ ë¶ˆëŸ‰ ìœ í˜• ë¶„ë¥˜ + ì„¤ëª… ì¶œë ¥ ]
   â†“
[ ê²°ê³¼ DB ì €ìž¥ ë° í™”ë©´ í‘œì‹œ ]
```
---

## ðŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```css
defect_inspector/
â”œâ”€â”€ gui/
â”‚   â””â”€â”€ main_app.py
â”‚   â””â”€â”€ main_window.py
â”‚   â””â”€â”€ stats_view.py
â”œâ”€â”€ api/
â”‚   â””â”€â”€ openai_api.py
â”œâ”€â”€ db/
â”‚   â””â”€â”€ db.py
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ make_test_db.py
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ config.py
â”‚   â””â”€â”€ cardd_sampler.py 
â”‚   â””â”€â”€ file_handler.py
â”œâ”€â”€ main.py
â”œâ”€â”€ app.db
â”œâ”€â”€ .env.example
â””â”€â”€ requirements.txt
```

---

## ðŸ“· ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤

- ê³µì • ì¤‘ ë¶€í’ˆ ì´ë¯¸ì§€ë¥¼ ì´¬ì˜
- GPTê°€ ìžë™ìœ¼ë¡œ ë¶ˆëŸ‰ ìœ í˜• íƒœê¹… (ì˜ˆ: â€œìŠ¤í¬ëž˜ì¹˜, confidence=0.82â€)
- DBì— ë‚ ì§œÂ·ë¶ˆëŸ‰ ìœ í˜• ì €ìž¥
- ê²€ìƒ‰ì–´ â€œìŠ¤í¬ëž˜ì¹˜â€, â€œ9ì›” ê· ì—´â€ ë“±ìœ¼ë¡œ ë¹ ë¥¸ ì¡°íšŒ

---

## ðŸš€ í™•ìž¥ ì•„ì´ë””ì–´

- ê²°ê³¼ë¥¼ CSV/Excelë¡œ export
- ë¶ˆëŸ‰ ìœ í˜•/ê¸°ê°„ë³„ **í†µê³„ ëŒ€ì‹œë³´ë“œ (matplotlib ì‹œê°í™”)** (2025-10-04 ë°˜ì˜)
- GPT ë¶„ë¥˜ í›„ **ë¼ë²¨ ê²€ìˆ˜(ì‚¬ëžŒ í™•ì¸) íŽ˜ì´ì§€**
- ì´ë¯¸ì§€ ì „ì²˜ë¦¬(OpenCV) ê¸°ë°˜ ë³´ì¡° íŠ¹ì§• ì¶”ì¶œ (ì˜ˆ: ì—ì§€ ê²€ì¶œ í›„ GPT ë³´ì¡° íŒì •)

---

## ðŸ“¦ requirements.txt
```txt
PyQt5>=5.15
matplotlib>=3.8
pillow>=10.0
python-dotenv>=1.0
sqlite-utils>=3.36
```

---